<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>教师资料 - 云课 - 专业的在线学习平台</title>
	<meta name="title" content="教师资料 - 云课 - 专业的在线学习平台">
	<meta name="keywords" content="云课 - Yunke K12 在线学习 直播 云课网 在线教育">
	<meta name="description" content="云课(Yunke.com) -专业的K12在线学习平台。以直播授课为核心，打破时间与空间的界限，为教师高效教学、学生高效学习、家长高效管控及机构高效管理提供完美解决方案">
    {part "/index.main.header"}
</head>
<body>
{part "/index.main.usernav.teacher"}
<section class="pd20" style="overflow:hidden;">
    <div class="container">
        <div class="row">
            {part "/index.main.menu.teacher"}
            <div class="col-lg-16 col-md-16 col-sm-20 col-xs-20">
            <!--mob-->
    <p class="mob-nav hidden-lg hidden-md">
        <a href="/index.teacher.student" class="col-xs-6">我的学生</a>
        <a href="/index.teacher.timetable" class="col-xs-6">我的课程</a>
        <a href="/index.teacher.edit" class="col-xs-6">教师资料</a>
    </p>
                <div class="right-content">
                    <form  id="form"  method="post" autocomplete="off">
                      <h1 class="fs16 fob">教师资料</h1>
                      <input type="password" style="display:none;">
                        <ul class="form fs14 mt40 wrap-form-select">
                        <li>
                            <div class="label col-lg-4 col-md-4 col-sm-3 col-xs-7 text-right"><img src="{utility_cdn::img('/assets_v2/img/platform/x.png')}">毕业院校：</div>
							<div class="label-for col-lg-16 col-md-16 col-sm-17 col-xs-13 row">
							<input type="text" class="col-lg-10 col-md-10 col-sm-10 col-xs-20" id="college" name="college" value="{if !empty($teacher->college)}{$teacher->college}{/if}">
							<span class="cGray" style="margin-left:10px;">最多输入15个汉字</span>
							<span class="tip1 cRed"></span>
							</div>
                        </li>
                        <li class="pd-b10">
                            <div class="label col-lg-4 col-md-4 col-sm-3 col-xs-7 text-right">学历：</div>
                            <div class="label-for col-lg-16 col-md-16 col-sm-17 col-xs-13 row">
                                <select name="diploma" id="" class="col-sm-5">
                                    <option value="-1" {if !empty($teacher->diploma)&&$teacher->diploma==-1}selected{/if}>不显示</option>
                                    <option value="1" {if !empty($teacher->diploma)&&$teacher->diploma==1}selected{/if}>大专</option>
                                    <option value="2" {if !empty($teacher->diploma)&&$teacher->diploma==2}selected{/if}>本科</option>
                                    <option value="3" {if !empty($teacher->diploma)&&$teacher->diploma==3}selected{/if}>硕士</option>
                                    <option value="4" {if !empty($teacher->diploma)&&$teacher->diploma==4}selected{/if}>博士</option>
                                </select>
                            </div>
                        </li>
                        <li>
                            <div class="label col-lg-4 col-md-4 col-sm-3 col-xs-7 text-right"><img src="{utility_cdn::img('/assets_v2/img/platform/x.png')}">教龄：</div>
                            <div class="label-for col-lg-16 col-xs-13 row">
                                <select name='years'>
                                    {for $i=1;$i<31;$i++}
                                    <option value='{$i}' {if !empty($teacher->years)&&$teacher->years==$i}selected{/if}>{$i}年</option>
                                    {/for}
                                    <option value='31' {if !empty($teacher->years)&&$teacher->years==31}selected{/if}>30年以上</option>
                                </select>
                            </div>
                        </li>
                        <li class="item_1">
                            <div class="label col-sm-3 col-xs-7 col-md-4 col-lg-4 text-right"><img src="{utility_cdn::img('/assets_v2/img/x.png')}">教学阶段：</div>
                            <div class="label-for col-sm-10 col-xs-13 col-lg-16 row">
							<label for="s1"><input type="checkbox" name="scopes[]" id="s1" value="preschool" {if !empty($teacher->scopes)&&in_array('preschool',$teacher->scopes)}checked{/if} id="s1">&nbsp;学前
							</label>
                                <label for="s2"><input type="checkbox" name="scopes[]" value="primary" {if !empty($teacher->scopes)&&in_array('primary',$teacher->scopes)}checked{/if} id="s2">&nbsp;小学</label>
                                <label for="s3"><input type="checkbox" name="scopes[]" value="junior" {if !empty($teacher->scopes)&&in_array('junior',$teacher->scopes)}checked{/if} id="s3">&nbsp;初中</label>
                                <label for="s4" ><input type="checkbox" name="scopes[]" value="senior" {if !empty($teacher->scopes)&&in_array('senior',$teacher->scopes)}checked{/if} id="s4">&nbsp;高中</label>
								<span class="tip1 cRed"></span>
                            </div>
                        </li>

                        <li class="item_2">
                            <div class="label tar col-lg-4 col-md-4 col-sm-3 col-xs-20"><img src="{utility_cdn::img('/assets_v2/img/x.png')}">&nbsp;擅长学科：</div>
                            <div class="label-for col-lg-16 col-md-16 col-sm-17 col-xs-20">
							<div class="t-subj-content col-lg-10 col-md-13 col-sm-10 col-xs-15" id="t-subj-content"  style="border:1px solid #ccc">
                                {if !empty($good_subject->data) }
                                    {foreach $good_subject->data as $v}
                                    {if !empty($v->name) }<div class="col-sm-6 delect-subj pd0 col-xs-5 col-lg-5 col-md-5 col-xs-5" contenteditable="false">
                                    {$v->name}<input type="hidden" value="{$v->fk_tag}" name="good_subject[]"></div>
                                    {/if}
                                    {/foreach}
                                {/if}
							</div>
                            <div class="t-subjects-but col-lg-10 col-md-5 col-sm-10 col-xs-5" style="padding:0;line-height:35px"><input id="click-but" type="button" value="添加标签" class="col-lg-4 col-md-15 col-sm-5 col-xs-17" style="padding:0;"><span class="cGray visible-lg col-lg-14">至少选择一项，最多选择三项</span><span class="visible-sm cGray col-sm-13">至选少一项,最多三项</span></div></div>
                        </li>
						<li>
                            <div class="label col-sm-3" style="padding:0px;"></div>
                            <div class="col-sm-14 col-md-offset-4 t-subjects-list pd0 mt10 col-md-14" id="t-subjects-list">
                           {if !empty($setArr)}
						   {foreach($setArr as $v)}
								<div class="col-sm-1 pd0 {if isset($tagArr)&&in_array($v->pk_tag,$tagArr)}on{/if}" rel="{$v->pk_tag}">{$v->name}</div>
							{/foreach}
							{/if}     
                            </div>
                        </li>
                        <li>
                            <div class="label tar col-lg-4 col-md-4 col-sm-3 col-xs-7"><img src="{utility_cdn::img('/assets_v2/img/platform/x.png')}">我的头衔：</div>
                            <div class="label-for col-lg-16 col-sm-17 row col-md-16 col-xs-13 row">
							<input type="text" class="col-lg-10 col-md-10 col-sm-10 col-xs-20" id="title" name="title" value="{if !empty($teacher->title)}{$teacher->title}{/if}">
							<span class="cGray" style="margin-left:10px;">最多输入10个汉字</span>
							<span class="tip1 cRed"></span>
							</div>
                        </li>
						 <li>
                            <div class="label tar col-sm-3 col-md-4 col-lg-4 col-xs-20">一句话简介：</div>
                            <div class="label-for col-lg-16 col-xs-20">
                                <input type="text" class="col-lg-10 col-xs-20" name="brief_desc" id="brief_desc" value="{if !empty($teacher->brief_desc)}{$teacher->brief_desc}{/if}">
							<span class="cGray">最多输入20个汉字</span>

							<span class="tip1 cRed"></span></div>
                        </li>
                        {*<li>
                            <div class="label col-lg-4 col-md-4 col-sm-3 col-xs-20 text-right">获得荣誉：</div><div class="label-for col-sm-6"><textarea name="" id="" cols="30" rows="3" class="col-sm-12" placeholder="优秀教师"></textarea></div>
                            <div class="label-for col-lg-16 row">
                                <div class="pic"><img src="{utility_cdn::img('/assets_v2/img/1.png')}" alt=""></div>
                                <button class="upload">上传证明</button>
                            </div>
                        </li>*}
                        <li>
                            <div class="label tar col-lg-4 col-md-4 col-sm-3 col-xs-20"><img src="{utility_cdn::img('/assets_v2/img/platform/x.png')}">教师简介：</div><div class="label-for col-lg-16 col-md-16 col-sm-17 col-xs-20"><textarea name="desc" id="desc" cols="30" rows="5" class="col-lg-14 col-md-15 col-sm-20 col-xs-20" placeholder="">{if !empty($teacher->desc)}{$teacher->desc}{/if}</textarea>
                            <div class="col-lg-20 cGray c-fl col-xs-20 row" style="line-height: 18px;">用一段话来介绍自己,让学生和家长更好的了解你.最多&nbsp;&nbsp;1000&nbsp;&nbsp;字.
							<span class="tip1 cRed"></span>
							</div>
                            <p class="desc-intr"></p>
							</div>
                            {*<div class="col-sm-2">
                                <div class="pic"><img src="{utility_cdn::img('/assets_v2/img/1.png')}" alt=""></div>
                                <button class="upload">上传视频</button>
                            </div>*}
                        </li>
                        <li>
                            <div class="label col-lg-4 col-md-4 col-sm-20 col-xs-20"> </div><div class="label-for col-xs-offset-3 col-lg-16 col-md-16 col-sm-20 col-xs-20 row col-sm-offset-5 col-md-offset-6"><button class="col-lg-4 col-md-8 col-sm-10 col-xs-10 btn blue-btn" type="submit">保存</button></div>
                        </li>
                    </ul>
                    </form>
                </div>
            </div>
            </div>
            <div class='clear'></div></div>
    </section>
    {part "/index.main.footer"}
</body>
{*<script src="{utility_cdn::js('/assets/libs/ckeditor/ckeditor.js')}"></script>
<script src="{utility_cdn::js('/assets/libs/ckeditor/adapters/jquery.js')}"></script>
<script type="text/javascript">
$(function  () {
    $( '#desc' ).ckeditor( { customConfig: '/assets/libs/ckeditor.config.js' } );
})
</script>*}
<script type="text/javascript">
$(function  () {


//验证毕业
$('#college').blur(function(){
		var college = $(this).val();
		$('#college').removeClass('box-shadow');
		 if( !college ) {
			$('#college').next().html('');
		 	$('#college').next().next().html('请填写毕业院校');
		    $('#college').addClass('box-shadow');
		    return;
		 }else if(college.length>15){
			$('#college').next().html('');
		 	$('#college').next().next().html('最多输入15个汉字');
			$('#college').addClass('box-shadow');
			return;
		 }else{
			$('#college').next().html('最多输入15个汉字');
		 	$('#college').next().next().html('');
			$('#college').removeClass('box-shadow');
		 }
});
//我的头衔
$('#title').blur(function(){
		var title = $(this).val();
		$('#title').removeClass('box-shadow');
		 if( !title ) {
			$('#title').next().html('');
		 	$('#title').next().next().html('请填写我的头衔');
		    $('#title').addClass('box-shadow');
		    return;
		 }else if(title.length>10){
			$('#title').next().html('');
		 	$('#title').next().next().html('最多输入10个汉字');
			$('#title').addClass('box-shadow');
			return;
		 }else{
			$('#title').next().html('最多输入10个汉字');
		 	$('#title').next().next().html('');
			$('#title').removeClass('box-shadow');
		 }
});
//一句话
$('#brief_desc').blur(function(){
		var brief_desc = $(this).val();
		$('#brief_desc').removeClass('box-shadow');
		 if(brief_desc.length>20){
			$('#brief_desc').next().html('');
		 	$('#brief_desc').next().next().html('最多输入20个汉字');
			$('#brief_desc').addClass('box-shadow');
			return;
		 }else{
			$('#brief_desc').next().html('最多输入20个汉字');
		 	$('#brief_desc').next().next().html('');
			$('#brief_desc').removeClass('box-shadow');
		 }
});
//介绍
$('#desc').blur(function(){
		var desc = $(this).val();
		$('#desc').removeClass('box-shadow');
		 if( !desc) {
		 	$('.desc-intr').html('请输入教师简介');
            $('.desc-intr').css("color","red")
		    $('#desc').addClass('box-shadow');
		    return;
		 }else if(desc.length>1000){
		 	$('#desc').next().html('最多输入1000个汉字');
			$('#desc').addClass('box-shadow');
			return;
		 }else{
		 	$('#desc').next().next().html('');
            $('.desc-intr').html('')
			$('#desc').removeClass('box-shadow');
		 }
});
/*
if($(this).find("input[name='scopes[]']:checked").length==0){
	$(".item_1 .tip1").html('请选择教学领域');
}else{
	$(".item_1 .tip1").html('');
}
*/
$(".label-for input[name='scopes[]']").each(function() {
	$(this).on('click',function() {
		 if($(this).attr("checked", true)) {
			$(".item_1 .tip1").html('');
		 }
	})
});

	$('input[type=text],select').on('change',function(){
        $(this).css("background-color","#FFF");
    })


	$(".t-subjects-but #click-but").click(function(){
                                $("#t-subjects-list").show();
                            })
                            var oT_Div_List = $("#t-subjects-list div");
                            oT_Div_List.on("click",function(){
                                var val = $(this).attr("rel");
                                    if($(this).hasClass("on")){
                                        return false;
                                    }else{
                                        if($('#t-subj-content>div').length>=3){
                                            alert('只能添加三项');
                                        }else{
                                            $(this).addClass("on");
											$(".t-subjects-but .cGray").css("color","#999");
                                            $("#t-subj-content").append('<div class="col-sm-1 delect-subj pd0 col-lg-5 col-xs-5"  contenteditable="false">'+$(this).text()+'<input type="hidden" name="good_subject[]" value="'+val+'"/></div>');
                                        }
                                    }
                                })
                            $("#t-subj-content").on('click','div',function(){
                                var txt=$(this).text().replace(/\s/g,"");
                                $("#t-subjects-list>div").each(function(){
                                    $(this).text();
                                    if($(this).text()==txt){
                                        $(this).removeClass('on');
                                    }
                                    // console.log($(this).text());
                                });
                                $(this).remove();
                            })


    $('input[type=text],select').on('change',function(){
        $(this).css("background-color","#FFF");
    })
    $("#form").submit(function(){
        if($(this).find('input[name=college]').val()==''){
			$('#college').next().next().html('请填写毕业院校');
            return false;
        }else if($(this).find('input[name=college]').val().length>15){

            return false;
        }else if($(this).find('select[name=years]').val()!=''&&isNaN($(this).find('select[name=years]').val())){
            layer.msg('教龄只能是数字格式');
            $(this).find('select[name=years]').css("background-color","#FFFFCC");
            return false;
        }else if($("#t-subj-content .delect-subj").length==0){
            $(".item_2 .cGray").css("color","red");
            return false;
        }else if($(this).find('select[name=years]').val()<0){
            layer.msg('教龄只允许输入正数字');
            $(this).find('select[name=years]').css("background-color","#FFFFCC");
            return false;
        }else if($(this).find('input[name=title]').val()==''){
			$('#title').next().next().html('我的头衔不能为空');
            return false;
        }else if($(this).find('input[name=title]').val().length>10){
			$('#title').next().next().html('不能超过10个汉字');
            return false;
        }else if($(this).find('input[name=brief_desc]').val().length>20){
            return false;
        }else if($(this).find('textarea[name=desc]').val()==''){
		$('#desc').addClass('box-shadow');
            return false;
        }else if($(this).find("input[name='scopes[]']:checked").length==0){
           $(".item_1 .tip1").html('请选择教学领域');
            return false;
        }else{
            $.post("/index.teacher.updateAjax",$(this).serialize(),function(r){
                if(r.error){
                    //layer.msg(r.error);
                    if(r.field){
                        $("[name="+r.field+"]").focus().css("background-color","#FFFFCC");
                    }
                }else{
                    //location.reload();
                    layer.msg('修改成功');
                }
                return false;
            },"json");
        }
        return false;
    });
})
</script>
</html>
