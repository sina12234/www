<!-- 平台频道页模板 js赋值-->
<!DOCTYPE html>
<html lang="en">
<head>
    <title>云课 - 专业的在线直播教育学习平台 - 云课网 </title>
    <meta name="title" content="云课 - 专业的在线直播教学习平台">
    <meta name="keywords" content="云课 - 云课堂 - Yunke K12 在线学习 直播 云课网 在线教育">
    <meta name="description" content="云课(Yunke.com) -专业的K12在线学习平台。以直播授课为核心，打破时间与空间的界限，为教师高效教学、学生高效学习、家长高效管控及机构高效管理提供完美解决方案">
    {part "/index.main.header"}
    <!--[if lt IE 9]>
    <link rel="stylesheet" type="text/css" href="//liuchangyuan.gn100.com/assets_v2/css/index.css">
    <script src="/assets_v2/bootstrap-3.3.0/js/html5shiv.min.js"></script>
    <script src="/assets_v2/bootstrap-3.3.0/js/respond.min.js"></script>
    <script type="text/javascript" src="/assets_v2/js/ie8/polyfill.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <script src="/assets_v2/js/ie8.js"></script>
    <![endif]-->
    <script type="text/javascript" src="/assets_v2/js/common/common.js"></script>
</head>
<style type="text/css">
.tab-title{ float: left-webkit-line-clamp: 2; display: block;width: 100%;padding: 0; overflow: hidden;line-height:20px;height:40px; margin: 4px 0;}
@media (max-width: 767px){
    .tab-li-img img{ height: 116px;}
}
</style>
<body>
 {part "/index.main.top"}
    {part "/index.main.nav/course"}
<section  id="banner">
    <script type="text/html" id="banner-html">
        <div id="slide" class="slide_wrap">
            <ul class="slide_imglist conbox">
                <% if (banner && banner.length>0 ) { for(var i =0;i< banner.length;i++) { %>
                <li class="i<%= i+1%>" style="background-color:<%= banner[i].rgb%>;">
                    <a href="<%= banner[i].url%>" target="_blank">
                        <div class="img-content" >
                            <div class=" pd0 col-lg-4 col-md-4 hidden-sm hidden-xs placeholder-ui" style="width:164px;"></div>
                            <div class="img-box  col-lg-20 col-md-20 col-sm-20 col-xs-20 pd0" >
                                <img alt="" class="ps-banner-img" src="<%= banner[i].thumb%>">
                            </div>
                            <div class="clear"></div>
                        </div>
                    </a>
                </li>
                <% } } else{ %>
                <li class="i0" style="background-color:#9ff1ff;">
                    <a href="/site" target="_blank">
                        <div class="img-content container" >
                            <div class=" pd0 col-lg-4 col-md-4 hidden-sm hidden-xs placeholder-ui" style="width:164px;"></div>
                            <div class="img-box col-lg-20 col-md-20 col-sm-20 col-xs-20 pd0" >
                                <img alt="" class="ps-banner-img" src="{utility_cdn::img('/assets_v2/img/banner-wo.png')}">
                            </div>
                            <div class="clear"></div>
                        </div>
                    </a>
                </li>
                <% } %>
            </ul>
            <div class="switcher">
                <% if (banner && banner.length>1 ) { for(var i =0;i< banner.length;i++) { %>
                <a href="javascript:;" <%if (i == 0) { %>class="cur"<% } %> ></a>
                <% } }  %>
            </div>
        </div>
    </script>
</section>
<script type="template" id="recommend-section">
    <%  if( recommend.length > 0 && recommend) { %>
    <section class="floor">
        <div class="container">
            <div class="row">
                <div class="floor-content">
                    <ul class="ps-course-list  course-list left col-lg-20 col-md-20 col-sm-20 col-xs-20">
                        <% for(var p = 0 ; p < recommend.length ; p++ ) { var recommendTmp = recommend[p]; %>
                        <li class="ps-course-list-item course-list-item col-lg-4 col-md-5  col-sm-6  col-xs-10">
                            <a  class="course-item-box ps-course-item-box" href="<%= recommendTmp.url%>">
                                <div class="tab-li-img">
                                    <img  src="<%= recommendTmp.thumb%>" width="100%" alt="">
                                </div>
                            </a>
                        </li>
                        <% } %>
                        <div class="clear"></div>
                    </ul>
                    <div class="clear"></div>
                </div>
            </div>
        </div>
    </section>
    <% } %>

</script>
<section id="floor">
</section>
<script type="template" id="floor-section">
    <% if( courses==" " || !courses) { %>
    <section class="floor no-data">
        <div class="container">
            <div class="row">
                <div class="floor-head tab-main">
                    <div class="floor-title left">
                        全部课程
                    </div>
                    <div class="clear"></div>
                </div>
                <div class="floor-content">
                    <ul class="course-list">
                        <% for(var i=0;i<5;i++) { %>
                        <li class="course-list-item no-data col-md-4 col-xs-10">
                            <a class="course-item-box" href="/org.main.setting">
                                <div class="tab-li-img">
                                    暂无课程
                                </div>
                            </a>
                        </li>
                        <% } %>
                        <div class="clear"></div>
                    </ul>

                </div>
            </div>
        </div>
    </section>
    <% } else { %>
    <%  var courseTmp = courses; %>
    <section class="floor mb20 pt20 mob-pd10">
        <div class="container">
            <div class="row">
                <div class="floor-title fs24 col-md-20 col-xs-20">
                    <div class="left">
                        <%= courseTmp.title%>
                    </div>
                    <!--<div class="floor-tab left tab-hd">-->
                    <!--<a href="" class="curr tab-hd-opt">热门</a>-->
                    <!--<a href="" class="tab-hd-opt">四年级</a>-->
                    <!--<a href="" class="tab-hd-opt">五年级</a>-->
                    <!--<a href="" class="tab-hd-opt">六年级</a>-->
                    <!--</div>-->
                    <div class="info-more right">                        
                        <% if(courseTmp.recommend=='2' && courseTmp.set_url) { %>
                        <a href="<%= courseTmp.set_url%>" class="theme-link fs14" target="_blank">
                            更多
                            <span class="right-arrow"></span>
                        </a>
                        <% } %>
                    </div>
                    <div class="clear"></div>
                </div>
                <div class="floor-content">
                    <% if (courseTmp.type==1){ %>
                    <div class="left-thumb left col-lg-4 col-md-4 hidden-xs hidden-sm">
                        <% if (courseTmp.thumb_left_url==""){ %>
                        <a href="javascript:void(0);">
                        <% }else{ %>
                        <a href="<%= courseTmp.thumb_left_url%>">
                        <% }%>
                            <% if (courseTmp.thumb_left==""){ %>
                            <img src="/assets_v2/img/no-banner.png" width="100%" alt="">
                            <% }else{ %>
                            <img src="<%= courseTmp.thumb_left%>" width="100%" alt="">
                            <% }%>
                        </a>
                    </div>
                    <% } %>
                    <% if (courseTmp.type==0){ %>
                    <ul class="right col-lg-20 col-md-20 col-sm-20 col-xs-20">
                    <% } else if (courseTmp.type==1){ %>
                    <ul class="right col-lg-16 col-md-16 col-sm-20 col-xs-20">
                    
                    <% } else if (courseTmp.type==2){ %>
                    <ul class="left col-lg-16 col-md-16 col-sm-20 col-xs-20">
                    <% } %>

                        <%  if(courseTmp['courses']){ if(toType(courseTmp.courses)=='object'){ courseTmp.courses = transformArr(courseTmp.courses);}; for(var m = 0 ; m < courseTmp.courses.length ; m++){ var course = courseTmp.courses[m]; %>
                        <% if (courseTmp.type==0){ %>
                        <li class="col-sm-5 col-xs-10">
                        <% } else{ %>
                        <li class="col-sm-5 col-xs-10">
                        <% } %>
                            <a  class="course-item-box" href="<%= course.url%>">
                                <div class="tab-li-img">
                                    <img  src="<%= course.thumb_med%>" width="100%" alt="">
                                </div>
                                <div class="title">
                                    <div class="tab-title">
                                        <%= course.title%>
                                    </div>
                                    <div class="tab-li-info">
                                        <div class="info-left mb10 left">
                                            <% if(course.price == 0 || course.fee_type==0){ %>
                                          <span class="wo-course-price cGreen">
                                            免费
                                        </span>
                                            <% } else {   %>
                                        <span class="wo-course-price cRed">
                                            <span class="fs12 mt2 ">￥</span>
                                            <%= course.price%>
                                        </span>
                                            <% } %>
                                            <% if(course['try'] && course['try'] == '1' ){ %>
                                            <span class="i-course-status">可试看</span>
                                            <% } %>
                                        </div>
                                        <% var userCount = parseInt(course.max_user)- parseInt(course.user_total);if(hotType == 1){ %>
                                        <div class="info-right right">
                                            <span class="icon count-icon"></span>
                                            <span class="person-count"><%= userCount%></span>
                                        </div>
                                        <% } else if(hotType == 3) {   %>
                                        <div class="info-right right">
                                            <span class="icon live-icon"></span>
                                            <span class="person-count"><%= course.vv%></span>
                                        </div>
                                        <% } else if(hotType == 2) {   %>
                                        <div class="info-right right">
                                            <% if(userCount>5){ %>
                                            <span class="icon hot-icon"></span>
                                            <span class="person-count">热报中</span>
                                            <% } else if(userCount>0 && userCount<5){ %>
                                            <span class="person-count">剩余<%= userCount%></span>
                                            <% } else if(userCount<=0){ %>
                                            <span class="person-count">已报满</span>
                                            <% }%>
                                        </div>
                                        <% } %>
                                        <div class="clear"></div>
                                    </div>
                                </div>
                            </a>
                            </li>
                            <% }} %>
                            <div class="clear"></div>
                        </ul>
                        <% if (courseTmp.type==2){ %>
                        <div class="right-thumb right col-lg-4 col-md-4 hidden-xs hidden-sm" >
                            <% if (courseTmp.thumb_right_url==""){ %>
                            <a href="javascript:void(0);">
                                <% }else{ %>
                                <a href="<%= courseTmp.thumb_right_url%>">
                                    <% }%>
                                    <% if (courseTmp.thumb_right==""){ %>
                                    <img src="/assets_v2/img/no-banner.png"  width="100%" alt="">
                                    <% }else{ %>
                                    <img src="<%= courseTmp.thumb_right%>" width="100%" alt="">
                                    <% }%>
                                </a>
                        </div>
                        <% } %>
                        <div class="clear"></div>
                </div>
            </div>
        </div>
    </section>
    <% }%>
</script>
<script src="{utility_cdn::js('/assets_v2/js/jquery/jquery.xslider.js')}"></script>
<!--[if lt IE 9]>
<script type="text/javascript" src="{utility_cdn::js('/assets_v2/js/ie8/ejs.ie8.js')}"></script>
<![endif]-->
<script type="text/javascript" src="{utility_cdn::js('/assets_v2/js/ejs.min.js')}"></script>
<script>
    var channelId = location.href.split('/').pop();
    $.ajax('/index.channel.channel.'+channelId,{
        type:'get',
        dataType:'json',
        success:function (data) {
            if(data.code=='100'){
                initData(data);
            }else{
                layer.msg('暂时无数据');
            }
        },
        error:function () {
            layer.msg('网络君开小差了');
        }
    });
    function initData(data) {
        var banner = data.channelBanner;
        var bannerHtml = $('#banner-html').html();
        $('#banner').html(ejs.render(bannerHtml,{ banner:banner}));
        if(data['blockList'] && data['blockList'].length>0){
            var modulelist = data.blockList;
            for(var i = 0 ; i < modulelist.length ; i++ ){
                if(modulelist[i].type == '3'){
                    var recommend = modulelist[i].thumb_arr;
                    var recommendHtml = $('#recommend-section').html();
                    $('#floor').append(ejs.render(recommendHtml,{ recommend:recommend}));
                }else{
                    var cousers = modulelist[i];
                    var floorHtml = $('#floor-section').html();
                    $('#floor').append(ejs.render(floorHtml,{ courses:cousers,hotType:data.HotType}));
                }
            }
        }
        // 焦点图片淡隐淡现
        $("#slide").Xslider({
            affect: 'fade',
            ctag: 'li', //内容标签 默认为<a>
            speed: 800, //动画速度
            space: 3000, //时间间隔
            auto: true, //自动滚动
            trigger: 'mouseover', //触发事件 注意用mouseover代替hover
            conbox: '.conbox', //内容容器id或class
            switcher: '.switcher', //切换触发器id或class
            stag: 'a', //切换器标签 默认为a
            current: 'cur', //当前切换器样式名称
            rand: false //是否随机指定默认幻灯图片
        });
    }

    // app隐藏header、footer
    $(function(){
        var hideType=(location.hash != '') ? location.hash : 0;
        var _header=$('header');
        var _footer=$('footer');
        if(hideType=='#hide'){
            _header.hide();
            _footer.hide();
        };

    })
</script>
{part "/index.main.footer"}
</body>
</html>